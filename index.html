<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç”·å¨˜æŒ‡æ•°æµ‹è¯•å™¨ + æ”¹åå»ºè®®ï¼ˆå¢å¼ºç‰ˆï¼‰</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-fadeIn { animation: fadeIn 0.8s ease-out; }
    .animate-slideInDown { animation: slideInDown 0.8s ease-out; }
    .animate-bounce { animation: bounce 1s infinite; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4 font-sans">

  <div class="w-full max-w-lg bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-6">

    <div class="text-center space-y-2">
      <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent">
        ğŸŒ¸ ç”·å¨˜æŒ‡æ•°æµ‹è¯•å™¨ v2 ğŸŒ¸
      </h1>
      <p class="text-gray-600">è¾“å…¥æ˜µç§° â†’ è®¡ç®—åˆ†æ•° â†’ æƒ³è¦æ›´é«˜/æ›´ä½ï¼Ÿè¯•è¯•æ›´å¤šæ”¹åæ–¹æ¡ˆï¼</p>
    </div>

    <!-- è¾“å…¥åŒº -->
    <div class="space-y-4">
      <input 
        id="nickname" 
        type="text" 
        placeholder="è¾“å…¥ä½ çš„æ˜µç§°..." 
        class="w-full px-4 py-3 text-lg text-center border-2 border-pink-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-300 transition"
      />

      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="calculate()"
          class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition transform hover:scale-105 active:scale-95"
        >
          å¼€å§‹æµ‹è¯•
        </button>
        <button 
          onclick="suggest()"
          class="bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition transform hover:scale-105 active:scale-95"
        >
          æƒ³è¦XXåˆ†ï¼Ÿç»™å»ºè®®
        </button>
      </div>
    </div>

    <!-- ç»“æœåŒº -->
    <div id="result" class="hidden space-y-6 pt-4 border-t border-gray-200">
      <div class="text-center">
        <div id="emoji" class="text-7xl mb-2 animate-bounce"></div>
        <div id="score" class="text-5xl font-bold text-purple-700"></div>
        <div id="grade" class="text-2xl font-semibold text-pink-600 mt-1"></div>
      </div>
      <p id="desc" class="text-center text-gray-700 px-4"></p>
      <div class="w-full bg-pink-100 rounded-full h-3 overflow-hidden">
        <div id="progress" class="bg-gradient-to-r from-pink-500 to-purple-600 h-full transition-all duration-1000" style="width:0%"></div>
      </div>
    </div>

    <!-- å»ºè®®åŒº -->
    <div id="suggestion-area" class="hidden space-y-4 pt-6 border-t border-gray-200">
      <h3 class="text-xl font-bold text-center text-purple-700">æ”¹åå»ºè®®ï¼ˆç›®æ ‡åˆ†æ•°ï¼š <span id="target-score-display">?</span>ï¼‰</h3>
      <div id="suggestions" class="space-y-3 text-sm max-h-80 overflow-y-auto"></div>
    </div>

  </div>

  <script>
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //  æ ¸å¿ƒå“ˆå¸Œå‡½æ•°ï¼ˆä¸ Python ç‰ˆæœ¬å®Œå…¨ä¸€è‡´çš„ 32 ä½æœ‰ç¬¦å·æ¨¡æ‹Ÿï¼‰
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function calculateIndex(name) {
      if (!name || !name.trim()) return 0;

      let t = 0;
      const cleaned = name.trim();

      for (let char of cleaned) {
        const r = char.charCodeAt(0) & 0xFFFF;  // é™åˆ¶ä¸º 16 ä½ï¼ˆæ›´æ¥è¿‘çœŸå® unicode è¡Œä¸ºï¼‰
        let temp = (t * 31) + r;

        // æ¨¡æ‹Ÿ 32 ä½æ•´æ•°æº¢å‡º
        temp = temp | 0;                   // è½¬ä¸º 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆJS trickï¼‰
        // æˆ–è€…æ›´æ˜¾å¼å†™æ³•ï¼ˆä¸¤è€…ç­‰ä»·ï¼‰ï¼š
        // temp = temp & 0xFFFFFFFF;
        // if (temp & 0x80000000) temp -= 0x100000000;

        t = temp;
      }

      return Math.abs(t) % 101;
    }

    // åˆ†æ•° â†’ ç­‰çº§ï¼ˆä¸å˜ï¼‰
    function getGradeInfo(score) {
      if (score >= 90) return { grade: "SSSçº§ç”·å¨˜", desc: "èŒåŠ›çˆ†è¡¨ï¼å·²è¾¾ç”·å¨˜å·…å³°å¢ƒç•ŒğŸ’–", emoji: "ğŸŒ¸" };
      if (score >= 75) return { grade: "SSçº§ç”·å¨˜",  desc: "éå¸¸ä¼˜ç§€ï¼ç”·å¨˜æ½œåŠ›æå¼ºâœ¨", emoji: "ğŸ€" };
      if (score >= 60) return { grade: "Sçº§ç”·å¨˜",   desc: "ç›¸å½“æœ‰ç”·å¨˜ç‰¹è´¨å“¦ï½ğŸŒŸ", emoji: "ğŸ¦„" };
      if (score >= 45) return { grade: "Açº§ç”·å¨˜",   desc: "æœ‰ä¸€å®šç”·å¨˜æ½œè´¨ï¼Œç»§ç»­åŠ æ²¹ï¼ğŸ’ª", emoji: "ğŸŒˆ" };
      if (score >= 30) return { grade: "Bçº§ç”·å¨˜",   desc: "è¿˜æœ‰æå‡ç©ºé—´ï¼å¤šå°è¯•å¯çˆ±å…ƒç´ ğŸ¯", emoji: "â­" };
      if (score >= 15) return { grade: "Cçº§ç”·å¨˜",   desc: "ç”·å¨˜ä¹‹è·¯åˆšåˆšèµ·æ­¥ï½ğŸŒ±", emoji: "ğŸ€" };
      return { grade: "Dçº§ç”·å¨˜", desc: "ç¡¬æ ¸å±æ€§maxï¼çº¯çˆ·ä»¬ã®è¯æ˜âš”ï¸", emoji: "âš”ï¸" };
    }

    function showResult(name) {
      const score = calculateIndex(name);
      const info = getGradeInfo(score);

      document.getElementById('emoji').textContent = info.emoji;
      document.getElementById('score').textContent = score + " åˆ†";
      document.getElementById('grade').textContent = info.grade;
      document.getElementById('desc').textContent = info.desc;
      document.getElementById('progress').style.width = score + '%';

      document.getElementById('result').classList.remove('hidden');
    }

    function calculate() {
      const name = document.getElementById('nickname').value;
      if (!name.trim()) {
        alert("è¯·è¾“å…¥æ˜µç§°å“¦ï½");
        return;
      }
      showResult(name);
      document.getElementById('suggestion-area').classList.add('hidden');
    }

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    //          å¢å¼ºç‰ˆæ”¹åå»ºè®®ç”Ÿæˆå™¨
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function generateSuggestions(baseName, target) {
      const suggestions = [];
      const MAX_SUGGEST = 8;

      // å¸¸ç”¨å¯çˆ±åç¼€ / å‰ç¼€ / ç¬¦å·
      const suffixes = ["é…±","å‘€","å‘¢","å–µ","å‘œ","ï½","!","!!","â™¡","â™¥","â˜†","â˜…","âœ¨","ğŸŒ¸","ğŸ€","ğŸ¦„","ã£","ã£ï¼","ãã‚“","ã¡ã‚ƒã‚“"];
      const prefixes  = ["å°","è¶…","æœ€","è¶…ç»","ç©¶æ","è¿·ä½ ","è½¯","ç”œ","è½¯èŒ","è¶…å¯çˆ±","åª","åªåª","ä¸€åª","è¶…æƒ³","æƒ³è¦","è¶…çˆ±"];
      const symbols   = ["!","@","#","$","%","^","&","*","(",")","_","+","=","-","~","â˜†","â˜…","â™¡","â™¥","âœ¨","ğŸŒ¸","ğŸ€","ğŸ¦„","ğŸŒŸ","ğŸ’•","ğŸ’–"];

      const add = (newName) => {
        if (suggestions.length >= MAX_SUGGEST) return true;
        if (calculateIndex(newName) === target && newName !== baseName) {
          suggestions.push(newName);
          return suggestions.length >= MAX_SUGGEST;
        }
        return false;
      };

      // ç­–ç•¥1ï¼šç›´æ¥åŠ /æ¢å¯çˆ±åç¼€ï¼ˆæœ€å¸¸è§ã€æœ€æœ‰æ•ˆï¼‰
      for (let s of suffixes) {
        if (add(baseName + s)) return suggestions;
        if (add(baseName + " " + s)) return suggestions;
      }

      // ç­–ç•¥2ï¼šåŠ å‰ç¼€ï¼ˆå°å¯çˆ±ã€è¶…ç”œç­‰ï¼‰
      for (let p of prefixes) {
        if (add(p + baseName)) return suggestions;
        if (add(p + " " + baseName)) return suggestions;
      }

      // ç­–ç•¥3ï¼šå•ä¸ªç¬¦å·å‰/å/ä¸¤è¾¹
      for (let s of symbols) {
        if (add(baseName + s)) return suggestions;
        if (add(s + baseName)) return suggestions;
        if (add(s + baseName + s)) return suggestions;
      }

      // ç­–ç•¥4ï¼šæ›¿æ¢æœ€åä¸€ä¸ªå­—ä¸ºå¯çˆ±ç¬¦å·æˆ–å¸¸ç”¨å­—
      if (baseName.length > 1) {
        const prefix = baseName.slice(0, -1);
        for (let s of [...suffixes, ...symbols.slice(0,20)]) {
          if (add(prefix + s)) return suggestions;
        }
      }

      // ç­–ç•¥5ï¼šåŠ ä¸¤ä¸ªç¬¦å·/åç¼€ç»„åˆï¼ˆæœ‰é™æœç´¢ï¼‰
      const combo = [...symbols.slice(0,18), ...suffixes.slice(0,12)];
      for (let a of combo) {
        for (let b of combo) {
          if (add(baseName + a + b)) return suggestions;
          if (add(baseName + a + " " + b)) return suggestions;
        }
      }

      // ç­–ç•¥6ï¼šåˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦ï¼ˆæœ‰æ—¶å¾ˆæœ‰æ•ˆï¼‰
      if (baseName.length > 2) {
        if (add(baseName.slice(0,-1))) return suggestions;
        if (add(baseName.slice(0,-2))) return suggestions;
      }

      return suggestions;
    }

    function suggest() {
      const name = document.getElementById('nickname').value.trim();
      if (!name) {
        alert("å…ˆè¾“å…¥ç°åœ¨çš„æ˜µç§°å§ï½");
        return;
      }

      const targetStr = prompt("æƒ³è¦çš„åˆ†æ•°æ˜¯ï¼Ÿï¼ˆ0-100ï¼‰", "88");
      if (targetStr === null) return;

      const target = parseInt(targetStr);
      if (isNaN(target) || target < 0 || target > 100) {
        alert("è¯·è¾“å…¥ 0ï½100 çš„æ•°å­—ï¼");
        return;
      }

      document.getElementById('target-score-display').textContent = target;

      const current = calculateIndex(name);
      const container = document.getElementById('suggestions');
      container.innerHTML = '';

      if (current === target) {
        container.innerHTML = `<p class="text-center text-green-600 font-medium">å½“å‰æ˜µç§°å·²ç»æ˜¯ ${target} åˆ†å•¦ï¼ä¸éœ€è¦æ”¹å“¦ï½ğŸ’•</p>`;
      } else {
        const sugs = generateSuggestions(name, target);

        if (sugs.length === 0) {
          container.innerHTML = `<p class="text-center text-gray-500">è¿™æ¬¡æ²¡æ‰¾åˆ°ç®€å•å¥½ç”¨çš„æ”¹æ³•â€¦<br>å¯ä»¥è¯•è¯•å…¶ä»–ç›®æ ‡åˆ†æ•°ï¼Œæˆ–è€…æ‰‹åŠ¨å¤šåŠ å‡ ä¸ªâ™¡âœ¨ï½</p>`;
        } else {
          sugs.forEach(n => {
            const score = calculateIndex(n);
            const div = document.createElement('div');
            div.className = 'bg-purple-50 p-3 rounded-lg flex justify-between items-center';
            div.innerHTML = `
              <div class="truncate flex-1">
                <span class="font-medium">${n}</span>
                <span class="text-purple-600 ml-2">(${score}åˆ†)</span>
              </div>
              <button onclick="applySuggestion('${n.replace(/'/g,"\\'")}')" 
                      class="text-sm bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700 shrink-0">
                ç”¨è¿™ä¸ª
              </button>
            `;
            container.appendChild(div);
          });
        }
      }

      document.getElementById('suggestion-area').classList.remove('hidden');
    }

    function applySuggestion(newName) {
      document.getElementById('nickname').value = newName;
      showResult(newName);
      document.getElementById('suggestion-area').classList.add('hidden');
    }
  </script>
</body>
</html>
