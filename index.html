<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ç”·å¨˜æŒ‡æ•°æµ‹è¯•å™¨ + æ”¹åå»ºè®®</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-fadeIn { animation: fadeIn 0.8s ease-out; }
    .animate-slideInDown { animation: slideInDown 0.8s ease-out; }
    .animate-bounce { animation: bounce 1s infinite; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center p-4 font-sans">

  <div class="w-full max-w-lg bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-6">

    <div class="text-center space-y-2">
      <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent">
        ğŸŒ¸ ç”·å¨˜æŒ‡æ•°æµ‹è¯•å™¨ v2 ğŸŒ¸
      </h1>
      <p class="text-gray-600">è¾“å…¥æ˜µç§° â†’ è®¡ç®—åˆ†æ•° â†’ æƒ³è¦æ›´é«˜/æ›´ä½ï¼Ÿè¯•è¯•æ”¹åå»ºè®®ï¼</p>
    </div>

    <!-- è¾“å…¥åŒº -->
    <div class="space-y-4">
      <input 
        id="nickname" 
        type="text" 
        placeholder="è¾“å…¥ä½ çš„æ˜µç§°..." 
        class="w-full px-4 py-3 text-lg text-center border-2 border-pink-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-300 transition"
      />

      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="calculate()"
          class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition transform hover:scale-105 active:scale-95"
        >
          å¼€å§‹æµ‹è¯•
        </button>
        <button 
          onclick="suggest()"
          class="bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white font-semibold py-3 rounded-lg transition transform hover:scale-105 active:scale-95"
        >
          æƒ³è¦XXåˆ†ï¼Ÿç»™å»ºè®®
        </button>
      </div>
    </div>

    <!-- ç»“æœåŒº -->
    <div id="result" class="hidden space-y-6 pt-4 border-t border-gray-200">
      <div class="text-center">
        <div id="emoji" class="text-7xl mb-2 animate-bounce"></div>
        <div id="score" class="text-5xl font-bold text-purple-700"></div>
        <div id="grade" class="text-2xl font-semibold text-pink-600 mt-1"></div>
      </div>
      <p id="desc" class="text-center text-gray-700 px-4"></p>
      <div class="w-full bg-pink-100 rounded-full h-3 overflow-hidden">
        <div id="progress" class="bg-gradient-to-r from-pink-500 to-purple-600 h-full transition-all duration-1000" style="width:0%"></div>
      </div>
    </div>

    <!-- å»ºè®®åŒº -->
    <div id="suggestion-area" class="hidden space-y-4 pt-6 border-t border-gray-200">
      <h3 class="text-xl font-bold text-center text-purple-700">æ”¹åå»ºè®®ï¼ˆç›®æ ‡åˆ†æ•°ï¼š <span id="target-score-display">?</span>ï¼‰</h3>
      <div id="suggestions" class="space-y-3 text-sm"></div>
    </div>

  </div>

  <script>
    // åŸç‰ˆå“ˆå¸Œç®—æ³•ï¼ˆå®Œå…¨ä¸€è‡´ï¼‰
    function calculateIndex(name) {
      if (!name?.trim()) return 0;
      let t = 0;
      const cleaned = name.trim();
      for (let char of cleaned) {
        const r = char.charCodeAt(0);
        let temp = (t * 31) + r;
        temp = temp & 0xFFFFFFFF;
        if (temp & 0x80000000) temp -= 0x100000000;
        t = temp;
      }
      return Math.abs(t) % 101;
    }

    // åˆ†æ•° â†’ ç­‰çº§æ˜ å°„ï¼ˆå’ŒåŸç‰ˆä¸€è‡´ï¼‰
    function getGradeInfo(score) {
      if (score >= 90) return { grade: "SSSçº§ç”·å¨˜", desc: "æ­å–œä½ ï¼ä½ å·²ç»è¾¾åˆ°äº†ç”·å¨˜çš„æœ€é«˜å¢ƒç•Œï¼ŒèŒåŠ›çˆ†è¡¨ï¼ğŸ’–", emoji: "ğŸŒ¸" };
      if (score >= 75) return { grade: "SSçº§ç”·å¨˜",  desc: "éå¸¸ä¼˜ç§€ï¼ä½ çš„ç”·å¨˜æ½œåŠ›éå¸¸å¼ºï¼Œç»§ç»­ä¿æŒï¼âœ¨", emoji: "ğŸ€" };
      if (score >= 60) return { grade: "Sçº§ç”·å¨˜",   desc: "è¡¨ç°å‡ºè‰²ï¼ä½ å·²ç»å…·å¤‡äº†ç›¸å½“çš„ç”·å¨˜ç‰¹è´¨ï¼ğŸŒŸ", emoji: "ğŸ¦„" };
      if (score >= 45) return { grade: "Açº§ç”·å¨˜",   desc: "è¿˜ä¸é”™ï¼ä½ æœ‰ä¸€å®šçš„ç”·å¨˜æ½œè´¨ï¼ŒåŠ æ²¹ï¼ğŸ’ª", emoji: "ğŸŒˆ" };
      if (score >= 30) return { grade: "Bçº§ç”·å¨˜",   desc: "æœ‰è¿›æ­¥ç©ºé—´ï¼ç»§ç»­åŠªåŠ›å¼€å‘ä½ çš„ç”·å¨˜å±æ€§ï¼ğŸ¯", emoji: "â­" };
      if (score >= 15) return { grade: "Cçº§ç”·å¨˜",   desc: "åˆšåˆšèµ·æ­¥ï¼ä½ çš„ç”·å¨˜ä¹‹è·¯æ‰åˆšåˆšå¼€å§‹ï¼ğŸŒ±", emoji: "ğŸ€" };
      return { grade: "Dçº§ç”·å¨˜", desc: "ç¨€æœ‰å±æ€§ï¼ä½ æ‹¥æœ‰ç‹¬ç‰¹çš„åˆšå¼ºæ°”è´¨ï¼ğŸ’ª", emoji: "âš”ï¸" };
    }

    // æ˜¾ç¤ºç»“æœ
    function showResult(name) {
      const score = calculateIndex(name);
      const info = getGradeInfo(score);

      document.getElementById('emoji').textContent = info.emoji;
      document.getElementById('score').textContent = score + " åˆ†";
      document.getElementById('grade').textContent = info.grade;
      document.getElementById('desc').textContent = info.desc;
      document.getElementById('progress').style.width = score + '%';

      document.getElementById('result').classList.remove('hidden');
    }

    // è®¡ç®—æŒ‰é’®
    function calculate() {
      const name = document.getElementById('nickname').value;
      if (!name.trim()) {
        alert("è¯·è¾“å…¥æ˜µç§°å“¦~");
        return;
      }
      showResult(name);
      document.getElementById('suggestion-area').classList.add('hidden');
    }

    // å»ºè®®æŒ‰é’®
    function suggest() {
      const name = document.getElementById('nickname').value.trim();
      if (!name) {
        alert("å…ˆè¾“å…¥ç°åœ¨çš„æ˜µç§°å§ï¼");
        return;
      }

      const target = prompt("ä½ æƒ³è¦çš„åˆ†æ•°æ˜¯ï¼Ÿï¼ˆ0-100ï¼‰", "90");
      if (target === null) return;

      const targetNum = parseInt(target);
      if (isNaN(targetNum) || targetNum < 0 || targetNum > 100) {
        alert("è¯·è¾“å…¥0~100ä¹‹é—´çš„æ•°å­—ï¼");
        return;
      }

      document.getElementById('target-score-display').textContent = targetNum;

      const suggestions = generateSuggestions(name, targetNum);

      const container = document.getElementById('suggestions');
      container.innerHTML = '';

      if (suggestions.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500">æš‚æœªæ‰¾åˆ°åˆé€‚çš„ç®€å•ä¿®æ”¹æ–¹æ¡ˆâ€¦<br>å¯ä»¥è¯•è¯•æ›´æç«¯çš„ç›®æ ‡åˆ†æ•°æˆ–æ‰‹åŠ¨å°è¯•æ·»åŠ ç¬¦å·/emojiå“¦~</p>';
      } else {
        suggestions.forEach(s => {
          const div = document.createElement('div');
          div.className = 'bg-purple-50 p-3 rounded-lg flex justify-between items-center';
          div.innerHTML = `
            <div>
              <span class="font-medium">${s.name}</span>
              <span class="text-purple-600 ml-2">(${s.score}åˆ†)</span>
            </div>
            <button onclick="applySuggestion('${s.name}')" class="text-sm bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700">
              ä½¿ç”¨è¿™ä¸ª
            </button>
          `;
          container.appendChild(div);
        });
      }

      document.getElementById('suggestion-area').classList.remove('hidden');
    }

    // åº”ç”¨å»ºè®®
    function applySuggestion(newName) {
      document.getElementById('nickname').value = newName;
      showResult(newName);
      document.getElementById('suggestion-area').classList.add('hidden');
    }

    // ç”Ÿæˆå»ºè®®ï¼ˆç®€å•æš´åŠ›æœç´¢ï¼‰
    function generateSuggestions(baseName, target) {
      const suggestions = [];
      const chars = "abcdefghijklmnopqrstuvwxyz0123456789!@#*â˜†â˜…â™¡â™¥âœ¨ğŸŒ¸ğŸ€ğŸ¦„ğŸŒˆâ­ğŸ€âš”ï¸ğŸ’–";

      // 1. åŠ å•ä¸ªå­—ç¬¦åç¼€
      for (let c of chars) {
        const newName = baseName + c;
        if (calculateIndex(newName) === target) {
          suggestions.push({name: newName, score: target});
          if (suggestions.length >= 4) return suggestions;
        }
      }

      // 2. åŠ å•ä¸ªå­—ç¬¦å‰ç¼€
      for (let c of chars) {
        const newName = c + baseName;
        if (calculateIndex(newName) === target) {
          suggestions.push({name: newName, score: target});
          if (suggestions.length >= 4) return suggestions;
        }
      }

      // 3. æ›¿æ¢æœ€åä¸€ä¸ªå­—ç¬¦
      if (baseName.length > 0) {
        const prefix = baseName.slice(0, -1);
        for (let c of chars) {
          const newName = prefix + c;
          if (calculateIndex(newName) === target) {
            suggestions.push({name: newName, score: target});
            if (suggestions.length >= 4) return suggestions;
          }
        }
      }

      // 4. åŠ ä¸¤ä¸ªå­—ç¬¦åç¼€ï¼ˆæœ‰é™ç»„åˆï¼‰
      for (let c1 of chars.slice(0, 15)) {
        for (let c2 of chars.slice(0, 15)) {
          const newName = baseName + c1 + c2;
          if (calculateIndex(newName) === target) {
            suggestions.push({name: newName, score: target});
            if (suggestions.length >= 4) return suggestions;
          }
        }
      }

      return suggestions;
    }
  </script>
</body>
</html>
